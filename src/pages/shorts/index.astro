---
import { getCollection } from "astro:content";

const posts = await getCollection("shorts");

const sortedPosts = posts.sort(
  (a, b) => b.data.publishedAt.getTime() - a.data.publishedAt.getTime()
);
---
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>YouTube Shorts | Moshi Moshi Japan</title>
    <meta name="description" content="Explore short explanations about Japanese culture and everyday life." />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>

  <body style="margin:0; background:#fafafa;">

    <main style="
      max-width: 760px;
      margin: 100px auto;
      padding: 0 24px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      color: #222;
    ">

      <h1 style="font-size: 40px; margin-bottom: 40px;">
        YouTube Shorts
      </h1>

      <ul style="list-style:none; padding:0;">

        {sortedPosts.map((post) => (
          <li style="
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e5e5e5;
          ">
            <a href={`/shorts/${post.slug}`} style="
              text-decoration:none;
              color:#111;
            ">
              <h2 style="margin-bottom:10px; font-size:22px;">
                {post.data.title}
              </h2>
            </a>

            <div style="font-size:14px; color:#888; margin-bottom:8px;">
              {post.data.publishedAt.toLocaleDateString("en-US")}
            </div>

            <p style="margin:0;">
              {post.data.description}
            </p>
          </li>
        ))}

      </ul>

      <p style="margin-top:60px;">
        <a href="/" style="text-decoration:none; color:#111;">
          ‚Üê Back to Home
        </a>
      </p>

    </main>
  </body>
</html>
