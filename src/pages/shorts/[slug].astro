---
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const posts = await getCollection("shorts");

  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
const { data } = post;
---
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{data.title} | Moshi Moshi Japan</title>
    <meta name="description" content={data.description} />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>

  <body style="margin:0; background:#fafafa;">

    <main style="
      max-width: 760px;
      margin: 100px auto;
      padding: 0 24px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      line-height: 1.8;
      color: #222;
    ">

      <h1 style="font-size:36px; margin-bottom:10px;">
        {data.title}
      </h1>

      <div style="font-size:14px; color:#888; margin-bottom:30px;">
        {data.publishedAt.toLocaleDateString("en-US")}
      </div>

      <article style="font-size:18px;">
        <Content />
      </article>

      <div style="margin-top:60px;">
        <a href="/shorts" style="text-decoration:none; color:#111;">
          ‚Üê Back to Shorts
        </a>
      </div>

    </main>
  </body>
</html>
