---
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const posts = await getCollection("shorts");

  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
const { data } = post;
---
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{data.title} | Moshi Moshi Japan</title>
    <meta name="description" content={data.description} />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>

  <body style="margin:0; background:#fafafa;">

    <main style="
      max-width: 760px;
      margin: 100px auto;
      padding: 0 24px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.8;
      color: #222;
    ">

      <h1 style="font-size:36px; margin-bottom:20px;">
        {data.title}
      </h1>

      <div style="font-size:14px; color:#888; margin-bottom:30px;">
        {data.publishedAt.toLocaleDateString("en-US")}
      </div>

      {data.youtubeId && (
        <div style="margin-bottom:40px;">
          <iframe
            width="100%"
            height="400"
            src={`https://www.youtube.com/embed/${data.youtubeId}`}
            title="YouTube Short"
            frameborder="0"
            allowfullscreen
            style="border-radius:8px;"
          ></iframe>
        </div>
      )}

      <article style="font-size:18px;">
        <Content />
      </article>

      <div style="
        margin-top:60px;
        padding:30px;
        background:#f3f3f3;
        border-radius:8px;
      ">
        <strong>Want to explore more about Japan?</strong>
        <p style="margin:10px 0;">
          Discover more short guides and upcoming experiences.
        </p>
        <a href="/" style="font-weight:600; text-decoration:none; color:#111;">
          Back to Home →
        </a>
      </div>

      <div style="margin-top:40px;">
        <a href="/shorts" style="text-decoration:none; color:#111;">
          ← Back to Shorts
        </a>
      </div>

    </main>
  </body>
</html>
