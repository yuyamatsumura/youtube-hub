---
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const posts = await getCollection("shorts");

  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
const { data } = post;
---
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{data.title} | Moshi Moshi Japan</title>
    <meta name="description" content={data.description} />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>

  <body style="margin:0; background:#fafafa;">

    <main style="
      max-width: 760px;
      margin: 100px auto;
      padding: 0 24px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.8;
      color: #222;
    ">

      <h1 style="font-size:36px; margin-bottom:20px;">
        {data.title}
      </h1>

      <div style="font-size:14px; color:#888; margin-bottom:30px;">
        {data.publishedAt.toLocaleDateString("en-US")}
      </div>

      {data.youtubeId && (
        <div style="margin-bottom:40px;">
          <iframe
            width="100%"
            height="400"
            src={`https://www.youtube.com/embed/${data.youtubeId}`}
            title="YouTube Short"
            frameborder="0"
            allowfullscreen
            style="border-radius:8px;"
          ></iframe>
        </div>
      )}

      <article style="font-size:18px;">
        <Content />
      </article>

      <div style="
  margin-top:70px;
  padding:40px;
  background:#111;
  border-radius:10px;
  color:white;
">

  <h2 style="margin-top:0; font-size:22px;">
    Explore Japan Beyond the Video
  </h2>

  <p style="margin:15px 0 25px 0; color:#ddd;">
    We share simple guides about Japanese culture, food, and daily life 
    for curious people around the world.
  </p>

  <div style="display:flex; gap:15px; flex-wrap:wrap;">
    
    <a 
      href="/shorts"
      style="
        background:white;
        color:#111;
        padding:12px 20px;
        border-radius:6px;
        text-decoration:none;
        font-weight:600;
      "
    >
      Browse More Shorts â†’
    </a>

    <a 
      href="/"
      style="
        border:1px solid white;
        padding:12px 20px;
        border-radius:6px;
        text-decoration:none;
        color:white;
      "
    >
      Back to Home
    </a>

  </div>
</div>


    </main>
  </body>
</html>
